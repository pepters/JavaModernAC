# ModernAC ‚Äî –∞–Ω—Ç–∏—á–∏—Ç –¥–ª—è PvP (Paper/Purpur 1.16.5‚Äì1.21.4)

ModernAC ‚Äî –ª—ë–≥–∫–∏–π –±–æ–µ–≤–æ–π –∞–Ω—Ç–∏—á–∏—Ç, –Ω–∞—Ü–µ–ª–µ–Ω–Ω—ã–π –Ω–∞ **PvP** (aim/killaura/triggerbot –∏ —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã).
–†–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö **PacketEvents 2.9.x** (–∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–ª–∞–≥–∏–Ω), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—É—Ä–æ–≤–Ω–∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ (tiers)** ‚Äî `MEDIUM / HIGH / CRITICAL` –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –æ–∫–Ω–∞–º (‚âà25/100/600 —Ç–∏–∫–æ–≤). –ö–æ–Ω—Å–æ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —á–∏—Å—Ç–∞—è ‚Äî —Ç–æ–ª—å–∫–æ –∞–ª—ë—Ä—Ç—ã –∏ –æ—à–∏–±–∫–∏.

- **–°–µ—Ä–≤–µ—Ä—ã:** Paper/Purpur **1.16.5‚Äì1.21.4**
- **Java:** —Å–±–æ—Ä–∫–∞ –Ω–∞ **Java 17** (–æ–∫ ‚Äî –∑–∞–ø—É—Å–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö Java 21)
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≤ —Ä–∞–Ω—Ç–∞–π–º–µ:** **PacketEvents 2.9.x** (*–Ω–µ —à–µ–π–¥–∏—Ç—Å—è*, –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–∞–∫ –ø–ª–∞–≥–∏–Ω)

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ü—Ä–æ–≤–µ—Ä–∫–∏ –±–æ—è** (—Å–µ–º–µ–π—Å—Ç–≤–∞ aim/killaura/triggerbot). Aggregation —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–∫–æ–Ω (‚âà25/100/600 —Ç–∏–∫–æ–≤) —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π `tiers` ‚Äî –±—ã—Å—Ç—Ä—ã–µ –∞–ª—ë—Ä—Ç—ã –Ω–∞ —Å–∏–ª—å–Ω—ã—Ö –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–∞—Ö, —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –Ω–∞ –¥–ª–∏–Ω–Ω–æ–π –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏.
- **–£—á—ë—Ç –∑–∞–¥–µ—Ä–∂–µ–∫**: –≥–µ–π—Ç—ã –ø–æ ping/TPS/LOS, —á—Ç–æ–±—ã —Å–Ω–∏–∑–∏—Ç—å –ª–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–∏ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞—Ö/—Å–µ—Ä–≤–µ—Ä–µ.
- **Alert Engine**: –∑–∞–¥–µ—Ä–∂–∫–∞, –±–∞—Ç—á–∏–Ω–≥ –∏ rate‚Äëlimit –Ω–∞ –∏–≥—Ä–æ–∫–∞ ‚Äî —á–∏—Ç–∞–µ–º—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∞.
- **Mitigation Engine**: —Å–Ω–∏–∂–µ–Ω–∏–µ —É—Ä–æ–Ω–∞ —É —Ñ–ª–∞–≥–Ω—É—Ç—ã—Ö –∏–≥—Ä–æ–∫–æ–≤ –≤–º–µ—Å—Ç–æ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã—Ö –Ω–∞–∫–∞–∑–∞–Ω–∏–π ¬´—Å —Ö–æ–¥—É¬ª.
- **–ü–æ–ª–∏—Ç–∏–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è**: –∫–æ–Ω—Å–æ–ª—å ‚Äî —Å—Ç–∞—Ä—Ç/—Å—Ç–æ–ø, –∞–ª—ë—Ä—Ç—ã, –æ—à–∏–±–∫–∏; –¥–µ—Ç–∞–ª—å–Ω—ã–π —Ç—Ä–µ–π—Å ‚Äî **—Ç–æ–ª—å–∫–æ –≤ —Ñ–∞–π–ª** —á–µ—Ä–µ–∑ `DetectionLogger` –∏ –ø–æ —Ñ–ª–∞–≥—É (–º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å —Ç–æ—á–µ—á–Ω–æ –Ω–∞ –∏–≥—Ä–æ–∫–∞).
- **AutoTotem (experimental)**: –∫–æ—Ä—Ä–µ–ª–∏—Ä—É–µ—Ç offhand‚Äëswap / –∫–ª–∏–∫–∏ —Å–ª–æ—Ç–∞ 45 / ¬´–≤–æ—Å–∫—Ä–µ—à–µ–Ω–∏–µ¬ª —Å –ø–æ—á—Ç–∏ –ª–µ—Ç–∞–ª—å–Ω—ã–º —É—Ä–æ–Ω–æ–º. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî **—Ç–æ–ª—å–∫–æ –∞–ª—ë—Ä—Ç—ã**, –≤—ã–∫–ª—é—á–µ–Ω–æ.
- **–ë–µ–∑ NMS**: PacketEvents + Bukkit/Paper API; –æ–¥–∏–Ω JAR –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤–µ—Ä—Å–∏–π.
- **–°—Ç–∏–ª—å –∫–æ–¥–∞**: CI –ø—Ä–∏–Ω—É–∂–¥–∞–µ—Ç **Spotless** (google‚Äëjava‚Äëformat).

---

## ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- **Paper/Purpur:** 1.16.5 ‚Äì 1.21.4
- **Java:** build 17; –∑–∞–ø—É—Å–∫ –Ω–∞ Java 21 ‚Äî –æ–∫
- **–ù—É–∂–Ω–æ –≤ –ø–ª–∞–≥–∏–Ω–∞—Ö:** PacketEvents 2.9.x

`plugin.yml` —Å–æ–¥–µ—Ä–∂–∏—Ç `depend: [packetevents]` ‚Äî –ø–æ—Ä—è–¥–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π.

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ü–æ–ª–æ–∂–∏—Ç–µ **PacketEvents 2.9.x** –≤ `plugins/`.
2. –ü–æ–ª–æ–∂–∏—Ç–µ **ModernAC.jar** –≤ `plugins/`.
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥–æ–≤.
4. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `config.yml` (–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é –≤ `messages.yml`).

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- –û—Å—Ç–∞–≤—å—Ç–µ `experimental_detections: false` –¥–ª—è –Ω–∞—á–∞–ª–∞ (–ø—Ä–æ–¥).
- –í—ã–¥–∞–π—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—É –ø—Ä–∞–≤–æ `ac.alerts`.
- –î–ª—è —Ç–æ—á–µ—á–Ω–æ–≥–æ —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/ac debug <–Ω–∏–∫>` ‚Äî –≤–∫–ª—é—á–∞–µ—Ç **file‚Äëtrace —Ç–æ–ª—å–∫–æ –¥–ª—è —ç—Ç–æ–≥–æ –∏–≥—Ä–æ–∫–∞**.

---

## üß∞ –ö–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–∞–≤–∞

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | Permission |
|---|---|---|
| `/ac info [–Ω–∏–∫]` | –°–Ω–∏–º–æ–∫ –∏–≥—Ä–æ–∫–∞: ping/TPS, —Å–≤–æ–¥–∫–∞ –ø–æ –æ–∫–Ω–∞–º/—Ç–∞–π–º–µ—Ä–∞–º, TTL `exempt` | `ac.command.info` |
| `/ac debug <–Ω–∏–∫>` | –í–∫–ª/–≤—ã–∫–ª –¥–µ—Ç–∞–ª—å–Ω—ã–π file‚Äëtrace –¥–ª—è –∏–≥—Ä–æ–∫–∞ | `ac.command.debug` |
| `/ac exempt <–Ω–∏–∫> <–≤—Ä–µ–º—è>` | –í—Ä–µ–º–µ–Ω–Ω–æ –∏—Å–∫–ª—é—á–∏—Ç—å –∏–≥—Ä–æ–∫–∞ (–Ω–∞–ø—Ä. `10s`, `5m`, `1h`) | `ac.command.exempt` |
| `/ac reload` | –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥–æ–≤/—Å–æ–æ–±—â–µ–Ω–∏–π, —Ä–µ—Å—Ç–∞—Ä—Ç —Ç–∞–π–º–µ—Ä–æ–≤ | `ac.command.reload` |
| `/ac devfake <–Ω–∏–∫>` | (dev) —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–π —Å–∏–≥–Ω–∞–ª –¥–ª—è —Ç–µ—Å—Ç–æ–≤ | `modernac.dev` |

–ü—Ä–∞–≤–∞: `ac.use`, `ac.alerts`, `ac.command.info`, `ac.command.debug`, `ac.command.exempt`, `ac.command.reload`, `modernac.dev`.

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥ (–æ–±—â–µ–µ)

ModernAC –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **tiers** (`MEDIUM/HIGH/CRITICAL`) –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –æ–∫–Ω–∞–º–∏. –í `config.yml` –≤—ã –≤—Å—Ç—Ä–µ—Ç–∏—Ç–µ:

```yml
latency:
  unstable_connection_latency_limit: 1750   # ms (–ø–æ—Ä–æ–≥ ¬´–º—è–≥–∫–æ–≥–æ —Ä–µ–∂–∏–º–∞¬ª)
  tps_soft_guard: 18.0                      # TPS-–ø–æ—Ä–æ–≥ –¥–ª—è –∂—ë—Å—Ç–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π

checks:
  experimental_detections: false            # –¥–ª—è –ø—Ä–æ–¥-—Å—Ç–∞—Ä—Ç–∞ –ª—É—á—à–µ off
  combat_tolerance: "normal"                # normal | lenient | aggressive

policy:
  min_independent_families_for_action: 2    # —Ç—Ä–µ–±–æ–≤–∞—Ç—å ‚â•2 –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–µ–º–µ–π—Å—Ç–≤
  require_multi_window_confirmation: true   # –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ –æ–∫–Ω–∞–º –≤–∫–ª—é—á–µ–Ω–æ
  # –ê–ª—ë—Ä—Ç—ã –æ–±—ã—á–Ω–æ –Ω–∞ HIGH; –Ω–∞–∫–∞–∑–∞–Ω–∏—è ‚Äî –Ω–∞ CRITICAL –ø—Ä–∏ –∑–¥–æ—Ä–æ–≤—ã—Ö ping/TPS.

mitigation:
  max_damage_reduction: 0.90
  apply_delay_seconds: [5, 15]
  duration_seconds: [60, 120]

punishments:
  adaptive: true
  # –ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º ‚Äî tiers; —á–∏—Å–ª–æ–≤—ã–µ ¬´–æ—Ü–µ–Ω–∫–∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏¬ª –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è.

alerts:
  staff_permission: "ac.alerts"
  delay_seconds: [5, 10]
  rate_limit_per_player_seconds: 3
  batch_window_seconds: 2

logging:
  alerts:
    to_console: true
    to_file: true
  detection_trace:
    enabled: false
    to_console: false
    to_file: false
    sample_per_second: 0
```

> **–í–∞–∂–Ω–æ–µ:** —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –ø–æ —á–µ–∫‚Äë–¥–µ—Ç–∞–ª—è–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é **–≤—ã–∫–ª—é—á–µ–Ω–∞**, —á—Ç–æ–±—ã –Ω–µ –∑–∞—Å–æ—Ä—è—Ç—å –ø—Ä–æ–¥‚Äë–ª–æ–≥–∏. –í–∫–ª—é—á–∞–π—Ç–µ —Ç–æ—á–µ—á–Ω–æ `/ac debug <–Ω–∏–∫>` ‚Äî –ø–∏—à–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Ñ–∞–π–ª.

---

## üß™ –ö–∞–∫ —ç—Ç–æ —É—Å—Ç—Ä–æ–µ–Ω–æ (–∫—Ä–∞—Ç–∫–æ)

```
PacketEvents ‚Üí PacketListenerImpl ‚Üí CheckManager ‚Üí DetectionEngine
                                      ‚îú‚Üí AlertEngine       (–∑–∞–¥–µ—Ä–∂–∫–∞/–±–∞—Ç—á/–ª–∏–º–∏—Ç—ã)
                                      ‚îú‚Üí PunishmentManager (–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ç–∞–π–º–µ—Ä—ã; CRITICAL)
                                      ‚îî‚Üí MitigationManager (—Å–Ω–∏–∂–µ–Ω–∏–µ —É—Ä–æ–Ω–∞)
```

- **–û–∫–Ω–∞**: SHORT (~25 —Ç–∏–∫–æ–≤), ANALYSIS (~100), LONG (~600). –ö–æ—Ä–æ—Ç–∫–æ–µ –æ–∫–Ω–æ –¥–∞—ë—Ç –±—ã—Å—Ç—Ä—ã–µ –∞–ª—ë—Ä—Ç—ã –ø—Ä–∏ —Å–∏–ª—å–Ω–æ–º —Å–∏–≥–Ω–∞–ª–µ, –¥–ª–∏–Ω–Ω—ã–µ ‚Äî —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π.
- **–ü–æ–ª–∏—Ç–∏–∫–∞**: —É—Ä–æ–≤–Ω–∏ `MEDIUM/HIGH/CRITICAL`; –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –æ–∫–Ω–∞–º –∏/–∏–ª–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º —Å–µ–º–µ–π—Å—Ç–≤–∞–º; —Å—Ç—Ä–æ–≥–∏–µ –¥–µ–π—Å—Ç–≤–∏—è ‚Äî —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–¥–æ—Ä–æ–≤—ã—Ö `ping/TPS/LOS`.
- **AutoTotem (experimental)**: offhand‚Äëswap / —Å–ª–æ—Ç‚Äë45 / resurrect + –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è —Å –ø–æ—á—Ç–∏ –ª–µ—Ç–∞–ª—å–Ω—ã–º —É—Ä–æ–Ω–æ–º. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é **—Ç–æ–ª—å–∫–æ –∞–ª—ë—Ä—Ç—ã**.

---

## üì¶ –°–±–æ—Ä–∫–∞ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤

```bash
# Java 17
mvn -DskipTests package
```
–ê—Ä—Ç–µ—Ñ–∞–∫—Ç: `target/ModernAC-<version>.jar`

> **PacketEvents** –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ `provided` –∏ —Å—Ç–∞–≤–∏—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –≤ `plugins/`. –ú—ã –µ–≥–æ **–Ω–µ** —à–µ–π–¥–∏–º.

---

## ü§ù –í–∫–ª–∞–¥ (–¥–ª—è –∫–æ–Ω—Ç—Ä–∏–±—å—é—Ç–æ—Ä–æ–≤)

- –ò–º–ø–æ—Ä—Ç—ã PacketEvents: **API** ‚Äî `com.github.retrooper.packetevents.*`; **builder** ‚Äî `io.github.retrooper.packetevents.factory.spigot.SpigotPacketEventsBuilder`.
- –í—Å–µ –ª–æ–≥–∏ ‚Äî —á–µ—Ä–µ–∑ `DetectionLogger`: –∫–æ–Ω—Å–æ–ª—å ‚Äî –∞–ª—ë—Ä—Ç—ã/–æ—à–∏–±–∫–∏, –¥–µ—Ç–∞–ª—å–Ω—ã–π —Ç—Ä–µ–π—Å ‚Äî —Ñ–∞–π–ª/–ø–æ —Ñ–ª–∞–≥—É.
- –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å NMS/Reflection, —Ç–æ–ª—å–∫–æ PacketEvents+Bukkit/Paper.
- –°–æ–±–ª—é–¥–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç **Spotless**: –æ–¥–∏–Ω LF –≤ –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞, –±–µ–∑ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤, –¥–ª–∏–Ω–Ω—ã–µ –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏–∏ ‚Äî –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É.
- –î–ª—è –æ—Ñ–ª–∞–π–Ω‚Äë–ø—Ä–∞–≤–∏–ª –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ –∑–∞–¥–∞—á–∞–º —Å–º. **AGENTS.md** (tiers, multi‚Äëwindow, –≥–µ–π—Ç—ã ping/TPS/LOS).

---

ModernAC ‚Äî –ø—Ä–∞–∫—Ç–∏—á–Ω—ã–π –∞–Ω—Ç–∏—á–∏—Ç –¥–ª—è PvP‚Äë—Å–µ—Ä–≤–µ—Ä–æ–≤: **–±—ã—Å—Ç—Ä—ã–π, —Ç–∏—Ö–∏–π, –±–µ–∑–æ–ø–∞—Å–Ω—ã–π**. –ù–∞—á–Ω–∏—Ç–µ —Å –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫, –Ω–∞–±–ª—é–¥–∞–π—Ç–µ –∑–∞ –∞–ª—ë—Ä—Ç–∞–º–∏, –∑–∞—Ç–µ–º –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —É–∂–µ—Å—Ç–æ—á–∞–π—Ç–µ –ø–æ–ª–∏—Ç–∏–∫—É.
